<!-- <nav class="navbar-clinica">
  <div class="logo">
    <img src="assets/images/icono.ico" alt="Clínica" />
    <div class="titulo-logo">
      <h2>Clínica OnLine</h2>
      <span>Especialistas en Salud</span>
    </div>
  </div>
  <ul class="navbar-links">
    <li><button >Mis Turnos</button></li>
    <li><button >Mi Perfil</button></li>
    <li><button class="logout-btn" (click)="logout()">Cerrar sesión</button></li>
  </ul>
</nav>


<div class="perfil-container" *ngIf="userData">
  <h2>Mi Perfil</h2>
  <img [src]="userData.fotoPerfil" alt="Foto de perfil" class="foto-perfil" />

  <div class="datos-usuario">
    <p><strong>Nombre:</strong> {{ userData.nombre }}</p>
    <p><strong>Apellido:</strong> {{ userData.apellido }}</p>
    <p><strong>Edad:</strong> {{ userData.edad }}</p>
    <p><strong>DNI:</strong> {{ userData.dni }}</p>
    <p><strong>Mail:</strong> {{ userData.mail }}</p>
  </div>

<div class="horarios-wrapper">
  <h2>Mis Horarios</h2>

  <div *ngFor="let h of horarios; let i = index" class="horario-row">
    <select [(ngModel)]="h.especialidad" class="campo">
      <option value="" disabled selected>Especialidad</option>
      <option *ngFor="let esp of especialidades" [value]="esp">{{ esp }}</option>
    </select>

    <select [(ngModel)]="h.duracion" class="campo">
      <option [value]="30">30 minutos</option>
      <option [value]="60">60 minutos</option>
    </select>

  <input type="date" [(ngModel)]="h.fecha" class="campo" />


    <select [(ngModel)]="h.horaInicio" class="campo">
      <option value="" disabled selected>Inicio</option>
      <option *ngFor="let hora of horas" [value]="hora">{{ hora }}</option>
    </select>

    <select [(ngModel)]="h.horaFin" class="campo">
      <option value="" disabled selected>Fin</option>
      <option *ngFor="let hora of horas" [value]="hora">{{ hora }}</option>
    </select>

    <button type="button" class="btn-borrar" (click)="eliminarHorario(i)">🗑️</button>
  </div>

  <div class="acciones-horarios">
    <button type="button" class="btn-agregar" (click)="agregarHorario()">➕ Agregar horario</button>
    <button type="button" class="btn-guardar" (click)="guardarHorarios()">Guardar horarios</button>
  </div>
</div>


<div class="turnos-container" *ngIf="turnos.length > 0">
  <h3>Mis Turnos</h3>
  <div *ngFor="let turno of turnos" class="turno-card">
    <p><strong>Paciente:</strong> {{ turno.paciente }}</p>
    <p><strong>Especialidad:</strong> {{ turno.especialidad }}</p>
    <p><strong>Fecha:</strong> {{ turno.fecha }} - {{ turno.hora }}</p>
    <p><strong>Estado:</strong> {{ turno.estado }}</p>
  </div>
</div>
 -->
<nav class="navbar-clinica">
  <div class="logo">
    <img src="assets/images/icono.ico" alt="Clínica" />
    <div class="titulo-logo">
      <h2>Clínica OnLine</h2>
      <span>Especialistas en Salud</span>
    </div>
  </div>
<ul class="navbar-links">
  <li><button (click)="toggleVista(false)">Mis Turnos</button></li>
  <li><button (click)="toggleVista(true)">Mi Perfil</button></li>
  <li><button class="logout-btn" (click)="logout()">Cerrar sesión</button></li>
</ul>
</nav>


<div *ngIf="mostrarPerfil">
<div class="perfil-container" *ngIf="userData">
  <h2>Mi Perfil</h2>
  <img [src]="userData.fotoPerfil" alt="Foto de perfil" class="foto-perfil" />

  <div class="datos-usuario">
    <p><strong>Nombre:</strong> {{ userData.nombre }}</p>
    <p><strong>Apellido:</strong> {{ userData.apellido }}</p>
    <p><strong>Edad:</strong> {{ userData.edad }}</p>
    <p><strong>DNI:</strong> {{ userData.dni }}</p>
    <p><strong>Mail:</strong> {{ userData.mail }}</p>
  </div>

<div class="horarios-wrapper">
  <h2>Mis Horarios</h2>

  <div *ngFor="let h of horarios; let i = index" class="horario-row">
    <select [(ngModel)]="h.especialidad" class="campo">
      <option value="" disabled selected>Especialidad</option>
      <option *ngFor="let esp of especialidades" [value]="esp">{{ esp }}</option>
    </select>

    <select [(ngModel)]="h.duracion" class="campo">
      <option [value]="30">30 minutos</option>
      <option [value]="60">60 minutos</option>
    </select>

  <input type="date" [(ngModel)]="h.fecha" class="campo" />


    <select [(ngModel)]="h.horaInicio" class="campo">
      <option value="" disabled selected>Inicio</option>
      <option *ngFor="let hora of horas" [value]="hora">{{ hora }}</option>
    </select>

    <select [(ngModel)]="h.horaFin" class="campo">
      <option value="" disabled selected>Fin</option>
      <option *ngFor="let hora of horas" [value]="hora">{{ hora }}</option>
    </select>

    <button type="button" class="btn-borrar" (click)="eliminarHorario(i)">🗑️</button>
  </div>

  <div class="acciones-horarios">
    <button type="button" class="btn-agregar" (click)="agregarHorario()">➕ Agregar horario</button>
    <button type="button" class="btn-guardar" (click)="guardarHorarios()">Guardar horarios</button>
  </div>
</div>
</div>
</div>
<!-- Sección TURNOS -->
<div *ngIf="!mostrarPerfil">
<div class="filtros">
  <h3>Filtrar por Especialidad:</h3>
  <button *ngFor="let esp of especialidadesUnicas"
          [class.selected]="filtroEspecialidad === esp"
          (click)="filtroEspecialidad = esp; aplicarFiltros()">
    {{ esp }}
  </button>
  <button *ngIf="filtroEspecialidad" (click)="filtroEspecialidad = null; aplicarFiltros()">Quitar filtro</button>

  <h3>Filtrar por Paciente:</h3>
  <button *ngFor="let p of pacientesUnicos"
          [class.selected]="filtroPaciente === p"
          (click)="filtroPaciente = p; aplicarFiltros()">
    {{ p }}
  </button>
  <button *ngIf="filtroPaciente" (click)="filtroPaciente = null; aplicarFiltros()">Quitar filtro</button>
</div>
<div *ngIf="turnosFiltrados.length === 0" class="no-turnos">
  <p>No hay turnos para mostrar.</p>
</div>


<!-- LISTADO DE TURNOS -->
<div *ngFor="let turno of turnosFiltrados"
     class="turno-card" 
     [attr.data-estado]="turno.estado?.toLowerCase()">

  <div class="turno-linea">
    <span class="campo"><strong>Especialista:</strong> {{ turno.especialista }}</span>
    <span class="campo"><strong>Especialidad:</strong> {{ turno.especialidad }}</span>
  </div>

  <div class="turno-linea">
    <span class="campo"><strong>Fecha:</strong> {{ turno.fecha }} - {{ turno.hora }}</span>
    <span class="campo">
      <strong>Estado:</strong>
      <span class="pill" [ngClass]="turno.estado.toLowerCase()">{{ turno.estado }}</span>
    </span>
  </div>

  <div class="acciones">
    <button *ngIf="puedeAceptar(turno.estado)" class="btn btn-aceptar" (click)="aceptarTurno(turno)">Aceptar</button>
    <button *ngIf="puedeRechazar(turno.estado)" class="btn btn-rechazar" (click)="rechazarTurno(turno)">Rechazar</button>
    <button *ngIf="puedeCancelar(turno.estado)" class="btn btn-cancelar" (click)="cancelarTurno(turno)">Cancelar turno</button>
    <button *ngIf="turno.estado === 'aceptado'" class="btn btn-finalizar" (click)="finalizarTurno(turno)">Finalizar</button>
    <button *ngIf="turno.comentarioEspecialista" class="btn btn-reseña" (click)="verResena(turno)">Ver reseña</button>
  </div>
</div>


</div>
